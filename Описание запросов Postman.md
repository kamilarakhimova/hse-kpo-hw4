# Описание запросов Postman

---

## *Микросервис 1 для авторизации пользователей ("enter").* 

### ◉ Приветствие пользователя ("greeting")

>Адрес:  http://127.0.0.1:5000

*Отправляем пустой GET-запрос.*

Получаем сообщение-приветствие от сервера:

```
{
    "answer": "Добро пожаловать на сервис авторизации."
}
```

### ◉ Регистрация пользователя ("registration")

>Адрес:  http://127.0.0.1:5000/registration

*Отправляем POST-запрос, содержащий в "body" json-объект с заполненными актуальными данными в графах "username", "password", "email" и "role".*

Пример:

```
{
    "username": "me3",
    "password": "mememe3",
    "email": "me3@gmail.com",
    "role": "customer"
}
```

В случае успешной регистрации получаем соответствующее подтверждение:

```
{
    "answer": "Ура, регистрация прошла успешно!"
}
```

Иначе система выдаёт сообщение с описанием проблемы (например, ввод некорректного email-адреса, попытка повторной регистрации и пр.).

### ◉ Авторизация пользователя ("authorization")

>Адрес:  http://127.0.0.1:5000/authorization

*Отправляем POST-запрос, содержащий в "body" json-объект с заполненными актуальными данными в графах "email" и "password".*

Пример:

```
{
    "email": "qwerty@gmail.com",
    "password": "qwerty"
}
```

В случае успешной авторизации получаем соответствующее подтверждение и наш JWT-токен (действие токена длится ровно сутки с момента авторизации):

```
{
    "answer": "Ура, авторизация прошла успешно!",
    "jwt_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InF3ZXJ0eUBnbWFpbC5jb20iLCJwYXNzd29yZCI6InF3ZXJ0eSJ9.34SyTLRcA3xkbssCtQGn0bD4jH6XeR3BVehF4iY9HiI"
}
```

Иначе система выдаёт сообщение с описанием проблемы (например, ввод некорректного email-адреса и пр.).

### ◉ Предоставление информации о пользователе ("user_information")

>Адрес:  http://127.0.0.1:5000/user

*Отправляем GET-запрос, содержащий в "body" json-объект с JWT-токеном пользователя.*

Пример:

```
{
    "jwt token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InF3ZXJ0eUBnbWFpbC5jb20iLCJwYXNzd29yZCI6InF3ZXJ0eSJ9.34SyTLRcA3xkbssCtQGn0bD4jH6XeR3BVehF4iY9HiI"
}
```

В случае корректности введённых данных получаем информацию о пользователе:

```
{
    "created_at": "2023-06-05 18:52:01",
    "email": "qwerty@gmail.com",
    "id": 1,
    "role": "manager",
    "username": "kamila"
}
```

Иначе система выдаёт сообщение об отсутствии информации о пользователе с описанным JWT-токеном:

```
{
    "error": "Увы, не удаётся найти информацию о Вас :("
}
```

---

## *Микросервис 2 для управления заказами и блюдами ("orders").* 

### ◉ Приветствие пользователя ("greeting")

>Адрес:  http://127.0.0.1:7000

*Отправляем пустой GET-запрос.*

Получаем сообщение-приветствие от сервера:

```
{
    "answer": "Добро пожаловать на сервис обработки заказов."
}
```

### ◉◉ Управление заказами ("order_management")

###     ◉ Создание заказа ("order_creation")

>Адрес:  http://127.0.0.1:7000/create_order

*Отправляем POST-запрос, содержащий в "body" json-объект с заполненными актуальными данными в графах "user_id", "dishes" (с описанием каждого желаемого блюда в формате "id", "quantity") и "special_requests".*

Пример:

```
{
    "user_id": "2",
    "dishes": [
        {
            "id": "1",
            "quantity": "1234"
        }],
    "special_requests": "добавьте к заказу осьминога и мидий, пожалуйста. и ещё мороженку"
}
```

В случае успешного действия получаем соответствующее подтверждение и номер нашего заказа:

```
{
    {
        "answer": "Ура, заказ создан успешно!"
    },
    {
        "order_id": 3
    }
}
```

Иначе система выдаёт сообщение с описанием проблемы (например, отсутствие регистрации у пользователя, отсутствие необходимого количества желаемых блюд и пр.). Присутствует проверка на наличие неотрицательного числа при вводе в полях "user_id", "id" и "quantity".

###     ◉ Обработка заказов ("order_processing")

>Адрес:  http://127.0.0.1:7000/process_order

*Отправляем пустой POST-запрос.*

Получаем сообщение с подтверждением об обработке всех висящих заказов:

```
{
    "answer": "Ура, заказы успешно обработаны!"
}
```

###     ◉ Предоставление информации о заказе ("order_information")

>Адрес:  http://127.0.0.1:7000/order

*Отправляем GET-запрос, содержащий в "body" json-объект с заполненной графой "order_id".*

Пример:

```
{
    "order_id": "3"
}
```

В случае корректности введённых данных получаем всю информацию о нашем заказе:

```
{
    "created_at": "2023-06-06 21:13:55.868801",
    "id": 3,
    "special_requests": "добавьте к заказу осьминога и мидий, пожалуйста. и ещё мороженку",
    "status": "done",
    "updated_at": "2023-06-06 21:16:37.656924",
    "user_id": 2
}
```

Иначе сообщение об ошибке:

```
{
    "error": "Увы, не удаётся найти указанный заказ :("
}
```

Присутствует проверка на наличие неотрицательного числа при вводе в поле "order_id".

### ◉◉ Управление блюдами ("dish_management")

>Адрес:  http://127.0.0.1:7000/manage_dishes

Доступ к управлению блюдами имеют только зарегистрированные пользователи с ролью "manager".

Иначе сервер сообщает об ошибке:

```
{
    "error": "Увы, Вы не можете управлять блюдами в связи с Вашей ролью :("
}
```

###     ◉ Получение информации о блюде ("get_requests")

*Отправляем GET-запрос, содержащий в "body" json-объект с заполненными актуальными данными в графах "user_id", "dish_id".*

Пример:

```
{
    "user_id": "1",
    "dish_id": "1"
}
```

В случае успешного действия получаем информацию об интересующем блюде:

```
{
    "dish": [
        1,
        "пицца",
        "сочная и аппетитная, пицца прямо из печи, приготовленная по классическому итальянскому рецепту. а стоит всего-то 20.000 биткоинов! налетай!!",
        20000,
        2999996175,
        1,
        "2023-06-06 03:34:07.685940",
        "2023-06-06 03:42:31.926485"
    ]
}
```

Иначе система выдаёт сообщение с описанием проблемы (например, отсутствие информации о блюде в базе данных, отсутствие необходимого количества желаемых блюд и пр.). Присутствует проверка на наличие неотрицательного числа при вводе в полях "user_id" и "dish_id".

###     ◉ Создание информации о блюде ("post_requests")

*Отправляем POST-запрос, содержащий в "body" json-объект с заполненными актуальными данными в графах "user_id", "name" (наименование блюда), "description", "price" и "quantity".*

Пример:

```
{
    "user_id": "1",
    "name": "соль",
    "description": "её хотят все.. фаворит всех и каждого. вечная неизменная классика.",
    "price": "10",
    "quantity": "5000"
}
```

В случае успешного действия получаем соответствующее подтверждение:

```
{
    "answer": "Ура, блюдо успешно создано!"
}
```

Иначе система выдаёт сообщение с описанием проблемы. Присутствует проверка на наличие неотрицательного числа при вводе в полях "user_id", "price" и "quantity".

###     ◉ Обновление информации о блюде ("put_requests")

*Отправляем PUT-запрос, содержащий в "body" json-объект с заполненными обновленными данными в графах "user_id", "name" (наименование блюда), "description", "price" и "quantity".*

Пример:

```
{
    "user_id": "1",
    "dish_id": "1",
    "name": "пицца",
    "description": "сочная и аппетитная, пицца прямо из печи, приготовленная по классическому итальянскому рецепту. а стоит всего-то 20.000 биткоинов! налетай!!",
    "price": "20000",
    "quantity": "3000000000"
}
```

В случае успешного действия получаем соответствующее подтверждение:

```
{
    "answer": "Ура, блюдо успешно обновлено!"
}
```

Иначе система выдаёт сообщение с описанием проблемы. Присутствует проверка на наличие неотрицательного числа при вводе в полях "user_id", "dish_id", "price" и "quantity".


###     ◉ Удаление информации о блюде ("delete_requests")


*Отправляем DELETE-запрос, содержащий в "body" json-объект с заполненными графами "user_id" и "dish_id".*

Пример:

```
{
    "user_id": "1",
    "dish_id": "3"
}
```

В случае успешности выполненного действия получаем соответствующее сообщение-подтверждение:

```
{
    "answer": "Мини-ура, блюдо успешно удалено (к сожалению)!"
}
```

Иначе система выдаёт сообщение с описанием проблемы. Присутствует проверка на наличие неотрицательного числа при вводе в полях "user_id" и "dish_id".

### ◉ Предоставление меню ("menu_info")

>Адрес:  http://127.0.0.1:7000/menu

*Отправляем пустой GET-запрос.*

Получаем актуальное меню с имеющимися в наличии блюдами.

Пример:

```
{
    "menu": [
        {
            "description": "сочная и аппетитная, пицца прямо из печи, приготовленная по классическому итальянскому рецепту. а стоит всего-то 20.000 биткоинов! налетай!!",
            "id": 1,
            "name": "пицца",
            "price": 20000,
            "quantity": 3000000000
        },
        {
            "description": "блюдо богов, вкуснятина нереальная, настоящая еда -- это всё о нём!",
            "id": 5,
            "name": "плов",
            "price": 11,
            "quantity": 1000
        },
        {
            "description": "её хотят все.. фаворит всех и каждого. вечная неизменная классика.",
            "id": 6,
            "name": "соль",
            "price": 10,
            "quantity": 5000
        }
    ]
}
```

---

### Конец!
