# Описание запросов Postman

---

## *Микросервис 1 для авторизации пользователей ("enter").* 

### ◉ Приветствие пользователя ("greeting")

>Адрес:  http://127.0.0.1:5000

*Отправляем пустой GET-запрос.*

Получаем сообщение-приветствие от сервера:

```
{
    "answer": "Добро пожаловать на сервис авторизации."
}
```

### ◉ Регистрация пользователя ("registration")

>Адрес:  http://127.0.0.1:5000/registration

*Отправляем POST-запрос, содержащий в "body" json-объект с заполненными актуальными данными в графах "username", "password", "email" и "role".*

Пример:

```
{
    "username": "me3",
    "password": "mememe3",
    "email": "me3@gmail.com",
    "role": "customer"
}
```

В случае успешной регистрации получаем соответствующее подтверждение:

```
{
    "answer": "Ура, регистрация прошла успешно!"
}
```

Иначе система выдаёт сообщение с описанием проблемы (например, ввод некорректного email-адреса, попытка повторной регистрации и пр.).

### ◉ Авторизация пользователя ("authorization")

>Адрес:  http://127.0.0.1:5000/authorization

*Отправляем POST-запрос, содержащий в "body" json-объект с заполненными актуальными данными в графах "email" и "password".*

Пример:

```
{
    "email": "qwerty@gmail.com",
    "password": "qwerty"
}
```

В случае успешной авторизации получаем соответствующее подтверждение и наш JWT-токен (действие токена длится ровно сутки с момента авторизации):

```
{
    "answer": "Ура, авторизация прошла успешно!",
    "jwt_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InF3ZXJ0eUBnbWFpbC5jb20iLCJwYXNzd29yZCI6InF3ZXJ0eSJ9.34SyTLRcA3xkbssCtQGn0bD4jH6XeR3BVehF4iY9HiI"
}
```

Иначе система выдаёт сообщение с описанием проблемы (например, ввод некорректного email-адреса и пр.).

### ◉ Предоставление информации о пользователе ("user_information")

>Адрес:  http://127.0.0.1:5000/user

*Отправляем GET-запрос, содержащий в "body" json-объект с JWT-токеном пользователя.*

Пример:

```
{
    "jwt token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6InF3ZXJ0eUBnbWFpbC5jb20iLCJwYXNzd29yZCI6InF3ZXJ0eSJ9.34SyTLRcA3xkbssCtQGn0bD4jH6XeR3BVehF4iY9HiI"
}
```

В случае корректности введённых данных получаем информацию о пользователе:

```
{
    "created_at": "2023-06-05 18:52:01",
    "email": "qwerty@gmail.com",
    "id": 1,
    "role": "manager",
    "username": "kamila"
}
```

Иначе система выдаёт сообщение об отсутствии информации о пользователе с описанным JWT-токеном:

```
{
    "error": "Увы, не удаётся найти информацию о Вас :("
}
```

---

## *Микросервис 2 для управления заказами и блюдами ("orders").* 

### ◉ Приветствие пользователя ("greeting")

>Адрес:  http://127.0.0.1:7000

*Отправляем пустой GET-запрос.*

Получаем сообщение-приветствие от сервера:

```
{
    "answer": "Добро пожаловать на сервис обработки заказов."
}
```

### ◉◉ Управление заказами ("order_management")

###     ◉ Создание заказа ("order_creation")

>Адрес:  http://127.0.0.1:7000/create_order

*Отправляем POST-запрос, содержащий в "body" json-объект с заполненными актуальными данными в графах "user_id", "dishes" (с описанием каждого желаемого блюда в формате "id", "quantity") и "special_requests".*

Пример:

```
{
    "user_id": 2,
    "dishes": [
        {
            "id": 1,
            "quantity": 1234
        }],
    "special_requests": "добавьте к заказу осьминога и мидий, пожалуйста. и ещё мороженку"
}
```

В случае успешного действия получаем соответствующее подтверждение и номер нашего заказа:

```
{
    {
        "answer": "Ура, заказ создан успешно!"
    },
    {
        "order_id": 3
    }
}
```

Иначе система выдаёт сообщение с описанием проблемы (например, отсутствие регистрации у пользователя, отсутствие необходимого количества желаемых блюд и пр.).

###     ◉ Обработка заказов ("order_processing")

>Адрес:  http://127.0.0.1:7000/process_order

*Отправляем пустой POST-запрос.*

Получаем сообщение с подтверждением об обработке всех висящих заказов:

```
{
    "answer": "Ура, заказы успешно обработаны!"
}
```

###     ◉ Предоставление информации о заказе ("order_processing")

>Адрес:  http://127.0.0.1:7000/order

*Отправляем GET-запрос, содержащий в "body" json-объект с заполненной графой "order_id".*

Пример:

```
{
    "order_id": 3
}
```

В случае корректности введённых данных получаем всю информацию о нашем заказе:

```
{
    "created_at": "2023-06-06 21:13:55.868801",
    "id": 3,
    "special_requests": "добавьте к заказу осьминога и мидий, пожалуйста. и ещё мороженку",
    "status": "done",
    "updated_at": "2023-06-06 21:16:37.656924",
    "user_id": 2
}
```

Иначе сообщение об ошибке:

```
{
    "error": "Увы, не удаётся найти указанный заказ :("
}
```


---

### Конец!
